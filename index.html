<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boredom Buster Hub üéâ</title>
  <meta name="description" content="Cure boredom with single-click activities, quick quizzes, memes and silly scenario prompts. Contribute your ideas to the community!" />
  <style>
    :root{
      --bg1: #fff6e6;
      --bg2: #ffecf0;
      --accent: #ff4668;
      --muted: #6b6b7a;
      --card: #ffffff;
      --glass: rgba(255,255,255,0.65);
      --radius: 18px;
      --shadow: 0 12px 36px rgba(16,24,40,0.12);
      --max-width: 1100px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color-scheme: light;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      min-height:100vh;
      background: radial-gradient(1200px 400px at 10% 10%, rgba(255,230,200,0.6), transparent 10%),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:1.25rem;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      color:#111827;
      font-size: 16px;
    }

    .app {
      width:100%;
      max-width:var(--max-width);
      background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.98));
      border-radius:24px;
      padding:20px;
      box-shadow:var(--shadow);
      backdrop-filter: blur(6px) saturate(120%);
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:20px;
      align-items:start;
    }

    header{
      grid-column:1/-1;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .emoji{
      font-size:36px;
      transform: rotate(-9deg);
      display:inline-block;
      filter: drop-shadow(0 4px 10px rgba(255,70,104,0.12));
    }
    h1{margin:0;font-size:1.25rem;line-height:1}
    p.lead{margin:0;color:var(--muted);font-size:0.95rem}

    .controls{display:flex;flex-direction:column;gap:16px}
    .card{
      background:var(--card);
      border-radius:14px;
      padding:14px;
      box-shadow: 0 8px 18px rgba(14,22,40,0.05);
      border: 1px solid rgba(10,10,10,0.02);
    }

    .big-btn{
      display:inline-flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      background: linear-gradient(90deg,#fff18a,#ffd1a9);
      border-radius:12px;
      padding:12px 14px;
      border:none;
      font-weight:700;
      cursor:pointer;
      box-shadow: 0 6px 18px rgba(255,107,107,0.10);
      transition: transform .12s ease, box-shadow .12s;
      font-size:1rem;
    }
    .big-btn:active{transform:translateY(2px)}
    .big-btn.secondary{background:var(--glass); font-weight:600}

    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .muted{color:var(--muted);font-size:0.9rem}

    #activityResult{margin-top:10px;font-size:1rem;font-weight:700;min-height:48px}
    .meta-row{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .tag{display:inline-block;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,#fff6f6,#fff);font-weight:700;color:#333}

    .quiz-question{font-weight:800;font-size:1rem}
    .choices{display:flex;flex-direction:column;gap:8px;margin-top:10px}
    .choice{padding:10px;border-radius:10px;background:#fff;border:1px solid rgba(0,0,0,0.06);cursor:pointer;text-align:left}
    .choice.correct{box-shadow:0 6px 18px rgba(16,185,129,0.08);border:1px solid rgba(16,185,129,0.18)}
    .choice.wrong{box-shadow:0 6px 18px rgba(244,63,94,0.06);border:1px solid rgba(244,63,94,0.14)}

    .right{display:flex;flex-direction:column;gap:16px}
    .meme-img{
      width:100%;
      height:260px;
      border-radius:12px;
      object-fit:cover;
      background:linear-gradient(180deg,#f7f7f8,#efefef);
      display:block;
      cursor:zoom-in;
    }
    .meme-row{display:flex;gap:8px;align-items:center;margin-top:8px;flex-wrap:wrap}
    .mini-btn{padding:8px 10px;border-radius:10px;border:none;cursor:pointer;font-weight:700;background:var(--glass)}

    footer{grid-column:1/-1;margin-top:6px;font-size:0.9rem;color:var(--muted);display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}

    .contribute-cta{
      text-align:center;
      padding:12px;
      border-radius:12px;
      background: linear-gradient(90deg,#fffbeb,#fff2f0);
      border:1px solid rgba(0,0,0,0.02);
    }

    .meme-modal{position:fixed;inset:0;background:rgba(0,0,0,0.72);display:flex;align-items:center;justify-content:center;z-index:1200}
    .meme-modal-hide{display:none}
    .meme-modal-content{width:95%;max-width:900px;background:#111; padding:14px;border-radius:12px;display:flex;flex-direction:column;align-items:center;gap:12px}
    .meme-modal-content img{max-width:100%;max-height:80vh;border-radius:8px;object-fit:contain}
    .modal-controls{display:flex;gap:8px;align-items:center}
    .close-modal{background:rgba(255,255,255,0.9);border:none;border-radius:8px;padding:8px 10px;font-weight:700;cursor:pointer}
    .download-modal{background:linear-gradient(90deg,#ffd1a9,#fff080);border:none;border-radius:8px;padding:10px 12px;font-weight:800;cursor:pointer}

    @media (max-width:1000px){
      .app{grid-template-columns:1fr; padding:16px}
      .right{order:3}
      header{flex-direction:column;align-items:center;text-align:center;gap:6px}
      .meme-img{height:220px}
    }
    @media (max-width:420px){
      body{padding:10px}
      .meme-img{height:180px}
      .big-btn{padding:12px;font-size:0.98rem}
      .card{padding:12px}
    }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Boredom Buster Hub">
    <header>
      <div class="brand">
        <div class="emoji">üß©</div>
        <div>
          <h1>Boredom Buster Hub</h1>
          <p class="lead">Quick activities, clever quizzes, memes & wild acting prompts ‚ú®</p>
        </div>
      </div>
      <div class="muted">Made with ‚ù§Ô∏è ‚Äî Demo</div>
    </header>

    <!-- LEFT: Controls -->
    <div class="controls">
      <!-- RANDOM ACTIVITY -->
      <div class="card" aria-live="polite">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
          <div>
            <div style="font-weight:900">üé≤ Quick Pick</div>
            <div class="muted">Instant micro-adventures ‚Äî 1 click to start</div>
          </div>
          <button id="getActivityBtn" class="big-btn" aria-label="Get Random Activity">I'm bored ‚Äî surprise me</button>
        </div>
        <div id="activityResult">Press the button to get a fun idea!</div>
        <div class="meta-row">
          <div class="muted">Type: <span id="activityType" class="tag">‚Äî</span></div>
          <div class="muted">People: <span id="activityParticipants" class="tag">‚Äî</span></div>
          <div class="muted">Cost: <span id="activityPrice" class="tag">‚Äî</span></div>
        </div>
      </div>

      <!-- QUIZ -->
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <div style="font-weight:900">üß† Quick Quiz</div>
            <div class="muted">One fun question ‚Äî immediate score</div>
          </div>
          <div style="text-align:right">
            <div class="muted">Score</div>
            <div id="quizScore" style="font-weight:900">0</div>
          </div>
        </div>

        <div id="quizArea" style="margin-top:10px">
          <div id="quizQuestion" class="quiz-question">Press "New Question" to begin</div>
          <div class="choices" id="choicesList" aria-hidden="true"></div>
          <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
            <button id="newQuestionBtn" class="mini-btn">New Question üîÅ</button>
            <button id="nextQuestionBtn" class="mini-btn" disabled>Next ‚ûú</button>
          </div>
        </div>
      </div>

      <!-- SITUATION SIMULATOR -->
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <div style="font-weight:900">üé≠ Situation Studio</div>
            <div class="muted">Act, narrate or improvise ‚Äî short and silly</div>
          </div>
          <button id="simBtn" class="big-btn">Give me a scene üé≤</button>
        </div>
        <div style="margin-top:12px">
          <div id="simResult" class="simulator-prompt" style="font-weight:800;min-height:48px">Try it ‚Äî get a short scene or persona.</div>
          <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
            <button id="copySim" class="mini-btn">Copy</button>
            <button id="shareSim" class="mini-btn">Share</button>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: Meme + Tools -->
    <aside class="right" aria-label="Extras">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <div style="font-weight:900">üòÇ Meme Machine</div>
            <div class="muted">Tap "New Meme" then long-press or right-click the image to view & download</div>
          </div>
          <button id="memeBtn" class="mini-btn">New Meme</button>
        </div>

        <img id="memeImg" class="meme-img" alt="Meme will appear here" />
        <div class="meme-row">
          <div class="muted" id="memeSource">source: ‚Äî</div>
          <div style="flex:1"></div>
          <button id="downloadMeme" class="mini-btn">Download</button>
        </div>
      </div>

      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <div style="font-weight:900">‚ú® Quick Boosts</div>
            <div class="muted">Tiny delights to lift your mood immediately</div>
          </div>
          <button id="surpriseBtn" class="mini-btn">Boost ‚ú®</button>
        </div>
        <div style="margin-top:12px">
          <div id="boostResult" style="font-weight:800;color:#444">Welcome! Try a boost.</div>
        </div>
      </div>

      <div class="contribute-cta card" style="text-align:center;">
        <h3 style="margin:0 0 6px 0">üí° Got a Fun Idea?</h3>
        <p class="muted" style="margin:0 0 10px 0">Share activities, scenarios or tiny boosts with the community.</p>
        <button id="contributeBtn" class="big-btn">Contribute üöÄ</button>
      </div>
    </aside>

    <footer>
      <div>Tip: big buttons are your friends ‚Äî press them! üéâ</div>
      <div class="muted">No API keys required ‚Äî community-friendly ‚úåÔ∏è</div>
    </footer>
  </div>

  <!-- Meme Modal -->
  <div id="memeModal" class="meme-modal meme-modal-hide" aria-hidden="true" role="dialog" aria-label="Meme preview">
    <div class="meme-modal-content" role="document">
      <div style="width:100%;display:flex;justify-content:flex-end;">
        <button id="closeModal" class="close-modal" aria-label="Close">‚úñ</button>
      </div>
      <img id="popupMemeImg" src="" alt="Full meme preview">
      <div class="modal-controls">
        <button id="popupDownloadBtn" class="download-modal">‚¨áÔ∏è Download Meme</button>
      </div>
    </div>
  </div>

  <script>
    // --- Helpers ---
    const el = id => document.getElementById(id);
    const randomFrom = arr => arr[Math.floor(Math.random()*arr.length)];
    const safeText = html => { const d = document.createElement('div'); d.innerHTML = html; return d.textContent; };

    // --- Data ---
    const LOCAL_ACTIVITIES = [
      "Write a 6-word horror story about your last snack.",
      "Create a two-move dance and perform it with gusto.",
      "Find a new 90s song and hum the chorus dramatically.",
      "Draw a tiny mascot for your current mood (5 mins).",
      "Teach your pet (or stuffed animal) one trick and film it.",
      "Make a postcard for a fictional planet and name it.",
      "Swap a compliment with the next person you meet.",
      "Try to rearrange three objects into something useful.",
      "Make a 30-second ASMR using household items.",
      "Design a signature handshake ‚Äî record it with your phone."
    ];

    const SIM_PROMPTS = [
      "You're a contestant on 'Inventor Idol' with only a toothbrush. Pitch your invention.",
      "You're an undercover detective at a bakery ‚Äî interrogate the muffin.",
      "You run a tiny time-travel agency that schedules micro-trips (3 lines). Sell one.",
      "You're hosting a chat show for plants ‚Äî interview a cactus about relationships.",
      "A minor superhero with ridiculous powers arrives at your cafe ‚Äî improvise the greeting.",
      "You're explaining a 'new' holiday to aliens. Describe the rituals in three steps.",
      "You're a ghost auditioning for a role in a soap opera. Perform your monologue.",
      "You're a jam reviewer ‚Äî rate 'strawberry' using only musical metaphors.",
      "A vending machine just started giving life advice. Read today's advice aloud.",
      "You're a pirate who has lost their map but found a grocery list. Make it dramatic."
    ];

    const BOOSTS = [
      "Micro-mission: smile at yourself in the mirror for 7 seconds üòÑ",
      "Quick creativity: name three imaginary planets in 10 seconds üåç",
      "Micro-move: stretch your arms up and wiggle your fingers for 12s ‚ú®",
      "Tiny challenge: say 'red leather, yellow leather' three times fast!",
      "Happy sound: hum the first tune that comes to mind for 6s üé∂",
      "Little weirdness: invent a secret handshake for your left foot ü¶∂"
    ];

    // --- Random Activity ---
    async function fetchRandomActivity(){
      const out = el('activityResult');
      const typeTag = el('activityType');
      const participants = el('activityParticipants');
      const price = el('activityPrice');
      out.textContent = 'üéØ Finding a delightful idea...';

      const endpoints = [
        'https://www.boredapi.com/api/activity',
        'https://api.allorigins.win/raw?url=https://www.boredapi.com/api/activity',
        'https://thingproxy.freeboard.io/fetch/https://www.boredapi.com/api/activity'
      ];

      async function fetchAndParse(url){
        const resp = await fetch(url, { cache: 'no-store' });
        if(!resp.ok) throw new Error('Bad response ' + resp.status);
        const ct = resp.headers.get('content-type') || '';
        if(ct.includes('application/json')) return await resp.json();
        const txt = await resp.text();
        try { return JSON.parse(txt); } catch(e){ throw new Error('Bad JSON'); }
      }

      for(const ep of endpoints){
        try{
          const data = await fetchAndParse(ep);
          if(data && (data.activity || data.error)){
            if(data.error) throw new Error('Bored API error');
            out.textContent = data.activity || 'Try something fun!';
            typeTag.textContent = data.type || '‚Äî';
            participants.textContent = ('participants' in data) ? data.participants : '‚Äî';
            price.textContent = (data.price === 0) ? 'free' : (data.price <= 0.3 ? 'cheap' : 'paid');
            return;
          }
        }catch(err){ console.warn('Activity fetch failed for', ep, err); }
      }

      // fallback
      const local = randomFrom(LOCAL_ACTIVITIES);
      out.textContent = local;
      typeTag.textContent = 'local';
      participants.textContent = '1';
      price.textContent = 'free';
    }
    el('getActivityBtn').addEventListener('click', fetchRandomActivity);

    // --- Quiz ---
    let currentAnswer = null;
    let quizScore = 0;
    async function newQuizQuestion(){
      el('quizQuestion').textContent = 'Loading question...';
      el('choicesList').innerHTML = '';
      el('choicesList').setAttribute('aria-hidden','true');
      el('nextQuestionBtn').disabled = true;
      try{
        const r = await fetch('https://opentdb.com/api.php?amount=1&type=multiple');
        const j = await r.json();
        if(!j.results || !j.results.length) throw new Error('No question');
        const q = j.results[0];
        const correct = safeText(q.correct_answer);
        const incorrect = q.incorrect_answers.map(safeText);
        const opts = incorrect.concat([correct]).sort(()=>Math.random()-0.5);
        currentAnswer = correct;
        el('quizQuestion').textContent = safeText(q.question);
        const list = el('choicesList');
        opts.forEach(opt=>{
          const b = document.createElement('button');
          b.className = 'choice';
          b.type = 'button';
          b.textContent = opt;
          b.onclick = ()=> selectChoice(b, opt);
          list.appendChild(b);
        });
        list.setAttribute('aria-hidden','false');
      }catch(e){
        el('quizQuestion').textContent = 'Could not load question ‚Äî try again.';
        console.error(e);
      }
    }

    function selectChoice(btn,opt){
      const list = el('choicesList');
      Array.from(list.children).forEach(c=>c.disabled = true);
      if(opt === currentAnswer){
        btn.classList.add('correct'); quizScore++; el('quizScore').textContent = quizScore;
      } else {
        btn.classList.add('wrong');
        Array.from(list.children).forEach(c => { if(c.textContent === currentAnswer) c.classList.add('correct'); });
      }
      el('nextQuestionBtn').disabled = false;
    }
    el('newQuestionBtn').addEventListener('click', ()=>{ newQuizQuestion(); el('nextQuestionBtn').disabled = true; });
    el('nextQuestionBtn').addEventListener('click', ()=>{ newQuizQuestion(); el('nextQuestionBtn').disabled = true; });

    // --- Meme ---
    async function fetchMeme(){
      const img = el('memeImg');
      const source = el('memeSource');
      img.alt = 'Loading...';
      source.textContent = 'source: loading...';
      try{
        const res = await fetch('https://meme-api.com/gimme');
        const data = await res.json();
        if(data && data.url){
          img.src = data.url;
          img.alt = data.title || 'Random meme';
          source.textContent = `r/${data.subreddit || 'meme'}`;
        } else throw new Error('No meme in response');
      }catch(e){
        console.warn('Meme failed', e);
        img.alt = 'No meme available';
        source.textContent = 'source: error';
        img.src = '';
      }
    }
    el('memeBtn').addEventListener('click', fetchMeme);

    el('downloadMeme').addEventListener('click', async ()=>{
      const src = el('memeImg').src;
      if(!src) return alert('No meme to download ‚Äî load one first.');
      try{
        const res = await fetch(src, {mode:'cors'});
        const blob = await res.blob();
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'meme';
        document.body.appendChild(a);
        a.click();
        a.remove();
      }catch(e){
        window.open(src, '_blank');
      }
    });

    // --- Situation Simulator ---
    el('simBtn').addEventListener('click', ()=>{ el('simResult').textContent = randomFrom(SIM_PROMPTS); });
    el('copySim').addEventListener('click', async ()=>{
      const txt = el('simResult').textContent;
      try { await navigator.clipboard.writeText(txt); el('copySim').textContent = 'Copied ‚úì'; setTimeout(()=>el('copySim').textContent='Copy',1200); } catch(e){ alert('Copy failed'); }
    });
    el('shareSim').addEventListener('click', ()=>{ navigator.share?.({title:'Situation Studio',text:el('simResult').textContent}); });

    // --- Quick Boosts ---
    el('surpriseBtn').addEventListener('click', ()=>{
      const b = randomFrom(BOOSTS);
      const out = el('boostResult');
      out.textContent = b;
      out.animate([{opacity:0, transform:'translateY(-6px)'},{opacity:1, transform:'translateY(0)'}], {duration:320});
    });
    async function loadCommunityIdeas(){
      try {
        const res = await fetch('/ideas');
        const ideas = await res.json();
        ideas.forEach(i=>{
          if(i.type.includes('Random')) LOCAL_ACTIVITIES.push(i.content);
          if(i.type.includes('Situation')) SIM_PROMPTS.push(i.content);
          if(i.type.includes('Quick')) BOOSTS.push(i.content);
        });
        console.log(`Loaded ${ideas.length} community ideas üéâ`);
      } catch (err) {
        console.warn('Failed to load community ideas', err);
      }
    }


    // --- Contribute ---
    el('contributeBtn').addEventListener('click', ()=> window.location.href = 'contribute.html');

    // --- Init ---
    (function init(){
      el('activityResult').textContent = 'Press "I\'m bored ‚Äî surprise me" to start a micro-adventure!';
      el('boostResult').textContent = 'Feeling meh? Tap Boost ‚ú®';
      fetchRandomActivity();
      fetchMeme();
      loadCommunityIdeas();
    })();
  </script>
</body>
</html>
